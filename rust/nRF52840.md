# docs: rust/nRF52840
#rust #nRF52840 #mcu

Demo code: https://learn.adafruit.com/adabox015/demo-code

## infos
-   MCU from Nordic Semiconductor
   -   **ARM Cortex M4 with FPU** (32-bit, running at 64 MHz)
   -   **1 MB flash, 256kB RAM**
   -   USB 2.0 Controller
   -   48 GPIOs, I2C, SPI, UART, ...
   -   Bluetooth 5 (BLE) transceiver
-   using the **Adafruit CLUE** board which integrates the nRF52840 together with some peripherals and a USB inerface

## enter bootloader
press reset button twice (a new storage device should appear, containing `CURRENT.UF2` (current application) and `INFO_UF2.TXT` (information about the bootloader)

## cross-compilation (ARM)
prequisites
```bash
# install prequisites
rustup component add thumbv7em-none-eabihf
rustup component add llvm-tools-preview
cargo install cargo-binutils
```

⚠️ Targets are installed per toolchain (use `--toolchain` to install for a different toolchain!

### uf2
- clone repository https://github.com/microsoft/uf2

```bash
# create main.bin
cargo-objcopy --release -- -O binary target/thumbv7em-none-eabihf/release/main.bin

# get size of each memory section
cargo-size --release -- -A

# cross-compile with uf2, create main.uf2
${HOME}/${path-to-repository}/uf2/utils/uf2conv.py -f 0xADA52840 --base 0x26000 --output target/thumbv7em-none-eabihf/release/main.uf2 target/thumbv7em-none-eabihf/release/main.bin

# create main.lst
cargo-objdump --release -- -D > target/thumbv7em-none-eabihf/release/main.lst
```